---
title: "Continuous integration benchmarks"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, include = FALSE}
library(rmo)
```

```{r costum_benchmark_plot, include = FALSE}
cb_plot_time <- function(x, n = 15, selected_names = NULL, selected_files = NULL) {
  has_benchmarks <- bench:::viapply(x$benchmarks, NROW) > 0
  x <- x[has_benchmarks, ]
  x <- x[stringr::str_detect(bench:::get_pretty_names(x), "(HEAD|tag)"), ]
  x <- head(x, n)
  x <- tidyr::unnest(x, benchmarks)
  if (!is.null(selected_names))
    x <- subset(x, name %in% selected_names)
  if (!is.null(selected_files))
    x <- subset(x, file %in% selected_files)
  
  x$name <- stringr::str_replace(x$name, "Ex_Arnold", "ExArnold")
  
  x$pretty_name <- bench:::get_pretty_names(x)
  x$pretty_name <- factor(x$pretty_name, levels = rev(unique(x$pretty_name)))
  aes <- ggplot2::aes
  ggplot2::ggplot(x, aes(x = pretty_name, y = p50)) +
    ggplot2::geom_ribbon(aes(
      group = name,
      ymin = p25, ymax = p75
    ), alpha = 1 / 2) +
    ggplot2::geom_line(aes(group = name)) +
    ggplot2::coord_flip() +
    ggplot2::scale_x_discrete(name = NULL) +
    bench::scale_y_bench_time(name = NULL, base = NULL) +
    ggplot2::facet_wrap(ggplot2::vars(
      file,
      name
    ), scales = "free_x")
}
```

```{r read-benchmarks, include=FALSE}
results <- bench::cb_read()
```


## Parametrizations

We use three different parametrizations for our benchmarks: 

a) A Cuadras-Augé parametrization with  \( \alpha = 0.6 \) and \( \beta = 0.4 \). 
b) A Pareto parametrization with \( \alpha = 0.5 \) and \( x_0 = 10^{-5} \).
c) A Poisson parametrization with \( \lambda = 1 \) and \( \eta = 0.5 \).

All three parametrizations run with \( n = 10^3 \) and \( d = 15 \). 
For the Markovian exchangeable MO model and the Lévy frailty model, we also run a 
high dimensional benchmark with \( d = 125 \). 

## Exogenous shock model 

```{r, echo=FALSE}
cb_plot_time(results, n = 15, selected_names = "ESM")
```

## Arnold model 

```{r, echo=FALSE}
cb_plot_time(results, n=15, selected_names = "Arnold")
```

## Exchangeable Arnold model 

```{r, echo=FALSE}
cb_plot_time(results, n=15, selected_names = c("Ex_Arnold", "ExArnold"))
```

## Lévy frailty model 

```{r, echo=FALSE}
cb_plot_time(results, n=15, selected_names = "LFM")
```

## Cuadras-Auge model

```{r, echo=FALSE}
cb_plot_time(results, n=15, selected_names = "CuadrasAuge")
```
